(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1baf799e"],{"0feb":function(e,t,n){"use strict";var a=n("365c"),s={get:function(e){return a["a"].get("permission",{params:{id:e}})},add:function(e){return a["a"].post("permission",e)},update:function(e){return a["a"].put("permission",e)},delete:function(e){return a["a"].delete("permission",{params:{id:e}})},deleteAll:function(e){return a["a"].delete("permission/deleteall",{params:{ids:e}})},getPageList:function(e){return a["a"].get("permission/pagelist",{params:e})},getList:function(e){return a["a"].get("permission/list",{params:e})},getPermissionIdsByRoleId:function(e){return a["a"].get("permission/permissionidsbyroleid",{params:{roleId:e}})},getPermissionListByUserId:function(e){return a["a"].get("permission/permissionlistbyuserid",{params:{userId:e}})},assignPermission:function(e){return a["a"].post("permission/assign",e)}};t["a"]=s},"365c":function(e,t,n){"use strict";n("a481");var a=n("bc3a"),s=n.n(a),r=n("3786"),i=n("41cb"),o=n("c0d6"),c=n("a026"),l="",u={baseURL:l+"/api"},d=s.a.create(u),f=s.a.create(),p=o["a"];d.interceptors.request.use((function(e){var t=new Date,n=new Date(Date.parse(p.state.tokenExpire));return p.state.token&&t<n&&p.state.tokenExpire&&(e.headers.Authorization="Bearer "+p.state.token),m(),e}),(function(e){return Promise.reject(e)})),d.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;if("ECONNABORTED"==e.code&&-1!=e.message.indexOf("timeout")&&!t._retry)return c["default"].prototype.$message({message:"请求超时！",type:"error"}),t._retry=!0,null;if(e.response){if(401==e.response.status){var n=new Date,a=new Date(Date.parse(window.localStorage.refreshtime));if(window.localStorage.refreshtime&&n<=a)return r["a"].refreshToken({token:window.localStorage.Token}).then((function(t){if(t.success){c["default"].prototype.$message({message:"refreshToken success! loading data...",type:"success"}),o["a"].commit("saveToken",t.token);var n=new Date,a=new Date(n.setSeconds(n.getSeconds()+t.expires_in));return o["a"].commit("saveTokenExpire",a),e.config.__isRetryRequest=!0,e.config.headers.Authorization="Bearer "+t.token,s()(e.config)}g()}));g()}if(403==e.response.status)return c["default"].prototype.$message({message:"失败！该操作无权限",type:"error"}),null}return""}));var m=function(){var e=new Date,t=window.localStorage.refreshtime?new Date(window.localStorage.refreshtime):new Date(-1),n=new Date(Date.parse(window.localStorage.TokenExpire)),a=1;t>=e?(t=e>n?e:n,t.setMinutes(t.getMinutes()+a),window.localStorage.refreshtime=t):window.localStorage.refreshtime=new Date(-1)},g=function(){o["a"].commit("saveToken",""),o["a"].commit("saveTokenExpire",""),o["a"].commit("saveTagsData",""),window.localStorage.removeItem("user"),window.localStorage.removeItem("NavigationBar"),i["a"].replace({path:"/login",query:{redirect:i["a"].currentRoute.fullPath}}),window.location.reload()},h={instance:function(){return d},baseInstance:function(){return f},get:function(e,t){return new Promise((function(n,a){d.get(e,t).then((function(e){n(e)})).catch((function(e){a(e)}))}))},post:function(e,t){return new Promise((function(n,a){d.post(e,t).then((function(e){n(e)})).catch((function(e){a(e)}))}))},put:function(e,t){return new Promise((function(n,a){d.put(e,t).then((function(e){n(e)})).catch((function(e){a(e)}))}))},delete:function(e,t){return new Promise((function(n,a){d.delete(e,t).then((function(e){n(e)})).catch((function(e){a(e)}))}))}};t["a"]=h},3786:function(e,t,n){"use strict";var a=n("365c"),s={getToken:function(e){return a["a"].get("auth/Token",e)},refreshToken:function(e){return a["a"].get("auth/RefreshToken",e)}};t["a"]=s},ac12:function(e,t,n){"use strict";var a=n("d82f"),s=n.n(a);s.a},d82f:function(e,t,n){},f3d1:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",attrs:{"element-loading-text":"正在加载"}},[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 菜单/按钮列表")])],1)],1),n("div",{staticClass:"container"},[n("div",{staticClass:"handle-box"},[n("tool-bar",{on:{callBack:e.callBack,search:e.search}})],1),n("el-table",{ref:"table",staticClass:"table",attrs:{data:e.tableData,border:"","highlight-current-row":""},on:{"current-change":e.handleSelect}},[n("el-table-column",{attrs:{label:"菜单/按钮",width:"",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"fa",class:t.row.Icon}),e._v("\n          "+e._s(t.row.Name)+"\n        ")]}}])}),n("el-table-column",{attrs:{prop:"ParentName",label:"父节点",width:"",sortable:""}}),n("el-table-column",{attrs:{prop:"Code",label:"路由地址",width:"",sortable:""}}),n("el-table-column",{attrs:{prop:"Enabled",label:e.$t("i18n.isenabled"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:t.row.Enabled?"success":"danger"}},[e._v("\n            "+e._s(t.row.Enabled?e.$t("i18n.yes"):e.$t("i18n.no")))])]}}])}),n("el-table-column",{attrs:{prop:"IsButton",label:"是否按钮",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:t.row.IsButton?"danger":"success","disable-transitions":""}},[e._v("\n            "+e._s(t.row.IsButton?"是":"否")+"\n          ")])]}}])}),n("el-table-column",{attrs:{prop:"IsHide",label:"是否隐藏",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:t.row.IsHide?"danger":"success","disable-transitions":""}},[e._v("\n            "+e._s(t.row.IsHide?"是":"否")+"\n          ")])]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},s=[],r=n("0feb"),i={name:"permission",data:function(){return{loading:!1,tableData:[],cur_page:1,size:10,total:0,keyword:"",selectedRow:null}},created:function(){this.getData()},components:{toolBar:function(){return n.e("chunk-2d0dd775").then(n.bind(null,"8205"))}},computed:{},methods:{callBack:function(e){this.keyword=e.keyword,this[e.action].apply(this,e)},handleCurrentChange:function(e){this.cur_page=e,this.getData()},getData:function(){var e=this;e.loading=!0,r["a"].getPageList({page:e.cur_page,size:e.size,keyword:e.keyword}).then((function(t){e.tableData=t.data.data.data,e.total=t.data.data.dataCount})).catch((function(t){e.$message({message:"加载数据失败",type:"error"})})).finally((function(){e.loading=!1}))},search:function(e){this.keyword=e,this.getData()},handleAdd:function(){this.$router.push({name:"addOrEditPermission",params:{id:id}})},handleEdit:function(e,t){if(this.selectedRow){var n=this.selectedRow.Id;this.$router.push({name:"addOrEditPermission",params:{id:n}})}else this.$message({message:"请先选择要编辑的数据",type:"warning"})},handleDelete:function(e,t){var n=this;if(this.selectedRow){var a=this.selectedRow.Id;this.$confirm(this.$t("i18n.deletetips"),this.$t("i18n.tips"),{confirmButtonText:this.$t("i18n.confirm"),cancelButtonText:this.$t("i18n.cancel"),type:"warning"}).then((function(){r["a"].delete(a).then((function(e){var t=e.data;t.success&&(n.$message({message:n.$t("i18n.deletesuccess"),type:"success"}),n.reload())})).catch((function(e){n.$message({message:n.$t("i18n.deleteerror")+e.response.data,type:"error"})}))})).catch((function(){}))}else this.$message({message:"请先选择要删除的数据",type:"warning"})},handleSelect:function(e){this.selectedRow=e},reload:function(){this.getData()}}},o=i,c=(n("ac12"),n("2877")),l=Object(c["a"])(o,a,s,!1,null,"099780ee",null);t["default"]=l.exports}}]);